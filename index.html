from telethon import TelegramClient, events
from telethon.tl.types import ChannelParticipantsAdmins
import asyncio
from collections import defaultdict
import time

from time import sleep
from rich.console import Console
from rich.progress import Progress, BarColumn, TextColumn

console = Console()

def cool_animation():
    console.print("[bold cyan]Bot Is Loading.....[/bold cyan]", justify="center<!DOCTYPE html>
<html>
<head>
	<title>Your Name</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			margin: 0;
			padding: 0;
		}
		.container {
			width: 80%;
			margin: 40px auto;
			padding: 20px;
			background-color: #f9f9f9;
			border: 1px solid #ddd;
			box-shadow: 0 0 10px rgba(0,0,0,0.1);
		}
		.profile-pic {
			width: 150px;
			height: 150px;
			border-radius: 50%;
			margin: 20px auto;
		}
	</style>
</head>
<body>
	<div class="container">
		<img src="your-profile-pic.jpg" alt="Your Name" class="profile-pic">
		<h1>Your Name</h1>
		<p>About me...</p>
		<p>Skills: HTML, CSS, JavaScript, etc.</p>
		<p>Contact: <a href="mailto:your-email@example.com">your-email@example.com</a></p>
		<ul>
			<li><a href="https:                                                     
			<li><a href="https://github.com/your-username">GitHub</a></li>
		</ul>
	</div>
</body>
</html>
")
    sleep(1)

    with Progress(
        TextColumn("[bold magenta]{task.description}[/bold magenta]"),
        BarColumn(),
        TextColumn("[bold yellow]{task.percentage:.0f}%[/bold yellow]"),
        console=console,
    ) as progress:
        task = progress.add_task("Loading...", total=100)
        for i in range(100):
            sleep(0.05)
            progress.update(task, advance=1)

    console.print("[bold green]âœ¨ Done! HARRY is now alive..... âœ¨[/bold green]", justify="center")

cool_animation()

# Apne credentials yahan update kar:
api_id = '29536868'
api_hash = '5eb2e9c0ed7575583ef2eec7178eeb1b'
bot_token = '7888008656:AAGjXT-pexVIz22fICYQkYz0tAYxj31yUMo'

client = TelegramClient('rose_bot', api_id, api_hash).start(bot_token=bot_token)

# Bot Owner ID (Sirf owner gsend command use kar sakta hai)
BOT_OWNER_ID = 6029220407  # Yahan apna Telegram ID dalna

# âœ…âœ…âœ… Group IDs (Jisme /gsend message bhejega) âœ…âœ…âœ…
GROUP_IDS = [-- --1002280683230]# Apne groups ke chat ID yahan daalo

# Flood control storage
flood_control = defaultdict(list)
antiflood_settings = {}

# Banned words list (Auto-delete system ke liye)
banned_words = [
    "madarchod", "bhosdike", "bhenchod", "chutiya", "lund", "gand", "randi", 
    "mc", "bc", "teri maa", "gandu", "kamina", "kuttiya", "chakka"
]

from telethon import events
import requests
import uuid
import asyncio

# Function to Generate Line Progress Bar
def get_loading_bar(progress):
    total_length = 20  # Bar Size
    filled_length = int(progress / 5)  # Convert 100% to 20 chars
    bar = "â”" * filled_length + "â”€" * (total_length - filled_length)  # Filled and Empty parts
    return f"`[{bar}] {progress}%`"

# Password Reset Function
def rest(user_id):
    url = "https://i.instagram.com/api/v1/accounts/send_password_reset/"
    payload = {
        'ig_sig_key_version': "4",
        'user_email': user_id,
        'device_id': str(uuid.uuid4()),
    }

    headers = {
        'User-Agent': "Instagram 113.0.0.39.122 Android",
        'Connection': "Keep-Alive",
        'Accept-Encoding': "gzip",
        'X-IG-Connection-Type': "WIFI",
    }

    try:
        res = requests.post(url, data=payload, headers=headers).json()
        if 'obfuscated_email' in res:
            return f"âœ… **ğƒğ„ğŠğ‡ ğğ‡ğ„ğ‰ ğƒğˆğ˜ğ€ ğ‘ğ„ğ’ğ„ğ“ ğ‹ğˆğğŠ âœ…**\nğŸ“© **ğŒğšğ¢ğ¥ ğ†ğšğ²ğš ğ¡ğšğ¢:** `{res['obfuscated_email']}` Is Gmail Mai..."
        else:
            return "âš ï¸ **ğ”ğ’ğ„ğ‘ğğ€ğŒğ„ ğğ€ğ‡ğˆ ğŒğˆğ‹ğ€ âŒ**                                                                     @x_k4i Ko Dm Kar Agar Koi Dikkat Hui..."
    except:
        return "âŒ **ğ„ğ«ğ«ğ¨ğ« ğ¡ğ¨ ğ ğšğ²ğš, ğ©ğ¡ğ¢ğ« ğ¬ğ ğ­ğ«ğ² ğ¤ğšğ«!**"

# Command Handler for /reset <username>
@client.on(events.NewMessage(pattern=r"^/reset\s+(\S+)", func=lambda e: e.is_private or e.is_group))
async def insta_reset(event):
    user_input = event.pattern_match.group(1)
    if not user_input:
        return await event.reply("âŒ **ğ€ğ«ğ ğ›ğ¡ğšğ¢, ğ„ğ¤ ğˆğ§ğ¬ğ­ğš ğ”ğ¬ğğ«ğ§ğšğ¦ğ ğ­ğ¨ ğğ ğğ‹ğ™!**")

    # Typing Animation
    async with event.client.action(event.chat_id, "typing"):
        await asyncio.sleep(0.5)
        loading_msg = await event.reply("ğŸ”„ **ğ‘ğ®ğ¤ğ¡ ğ£ğš, ğğ«ğ¨ğœğğ¬ğ¬ ğœğ¡ğšğ¥ ğ«ğ¡ğš ğ¡ğšğ¢!**\n\n" + get_loading_bar(0))
        
        for i in range(5, 101, 5):  # Fast Animation (5% steps)
            await loading_msg.edit(f"ğŸ”„ **ğğ«ğ¨ğœğğ¬ğ¬ ğ‚ğ¡ğšğ¥ ğ‘ğ¡ğš ğ¡ğšğ¢!**\n\n{get_loading_bar(i)}")
            await asyncio.sleep(0.2)  # Faster Speed
        
        await asyncio.sleep(0.5)
        await loading_msg.edit("â³ **ğˆğ§ğ¬ğ­ğšğ ğ«ğšğ¦ ğ¬ğ ğğšğ­ğš ğ¥ğ ğ«ğ¡ğš ğ¡ğ®...**")
        await asyncio.sleep(1)

    response = rest(user_input)
    
    async with event.client.action(event.chat_id, "typing"):
        await asyncio.sleep(0.5)
        await event.reply(response)

import random
from telethon import events

# 1000+ random truth questions list
truth_questions = [
    "Sabse badi sachai jo tune aaj tak chhupayi hai? ğŸ˜",
    "Kisi par crush aaya hai? Agar haan to kaun? ğŸ˜‰",
    "Aakhri baar jhooth kab bola tha aur kyu? ğŸ¤”",
    "Teri sabse embarrassing moment kya thi? ğŸ˜‚",
    "Kya tune kabhi kisi ko cheat kiya hai? ğŸ˜¶",
    "Tera sabse bada secret kya hai? ğŸ¤«",
    "Sabse weird cheez jo tune kabhi ki hai? ğŸ¤¯",
    "Teri life ka sabse bada regret kya hai? ğŸ˜”",
    "Tune kabhi kisiko propose kiya hai? Kya jawab mila? ğŸ˜³",
    "Kya tu apni ex ko ab bhi yaad karta hai? ğŸ’”",
    "Kabhi koi aisi cheez churai hai jo tujhe nahi karni chahiye thi? ğŸ˜†",
    "Tune kabhi kisi se flirt kiya hai bas mazaak me? ğŸ˜œ",
    "Kya tune kabhi apne friend ke crush ko pasand kiya hai? ğŸ¤­",
    "Tune kabhi kisi ko fake excuse diya hai kisi kaam se bachne ke liye? ğŸ¤¥",
    "Kabhi apne maa-baap se koi bada jhooth bola hai? Kya tha? ğŸ™ƒ",
    "Tere phone me sabse weird photo kaunsi hai? ğŸ˜",
    "Agar tu kisi ek superpower choose kar sakta to kya hota? ğŸ¦¸",
    "Tune kabhi kisi se aise secret share kiya jo nahi karna chahiye tha? ğŸ˜¬",
    "Tere phone ka sabse embarrassing message kaunsa hai? ğŸ¤ª",
    "Kabhi kisi famous person se milne ka mauka mila hai? Kaun tha? ğŸŒŸ",
    "Agar tujhe ek din ke liye ladka/ladki banne ka mauka mile to kya karega? ğŸ˜†",
    "Kabhi kisi ko bina matlab ke ignore kiya hai? Kyu? ğŸ¤”",
    "Kya tu apne best friend se kuch chhupa raha hai? ğŸ¤«",
    "Sabse bada jhooth jo tune apne teacher se bola hai? ğŸ­",
    "Kabhi kisi ko secretly follow kiya hai? (IRL ya social media) ğŸ‘€",
    "Kabhi apne kisi friend ka secret kisi aur ko bata diya? ğŸ˜¶",
    "Tune kabhi kisi par spying kiya hai? ğŸ˜",
    "Sabse embarrassing cheez jo tujhe school/college me hui hai? ğŸ’",
    "Kis celebrity ko dekh ke tera dil fast dhadakta hai? ğŸ’“",
    "Teri life ka sabse bada turning point kya raha hai? ğŸ”„",
    "Kabhi kisi se badla liya hai? Kaise? ğŸ˜ˆ",
    "Tune kabhi kisi ki chori pakdi hai? Kya kiya tha us time? ğŸ˜®",
    "Agar tujhe koi ek cheez change karne mile apni life me to kya karega? ğŸ”„",
    "Tere doston me kaun sabse zyada toxic hai? ğŸ˜µâ€ğŸ’«",
    "Agar tujhe koi ek wish milti jo sach ho jaye, to kya wish karega? ğŸŒ ",
    "Tune kabhi kisi random stranger se flirt kiya hai? ğŸ˜œ",
    "Apne friend ka sabse bada secret jo tujhe pata hai? ğŸ¤«",
    "Tujhe sabse zyada kiski yaad aati hai raat ko? ğŸŒ™",
    "Tune kabhi kisi ko stalk kiya hai? Kisko aur kyu? ğŸ•µï¸",
    "Agar tujhe pata chale ki ek din baad duniya khatam hone wali hai, to kya karega? ğŸŒğŸ’¥",
    "Kabhi kisi ko bina wajah gaali di hai? Kyu? ğŸ¤¬",
    "Tune kabhi kisi ki fake tareef ki hai? Kyu? ğŸ˜†",
    "Tera sabse bada pachtaava kya hai jo tu badalna chahta hai? ğŸ˜",
    "Kabhi kisi ki photos bina bataye save ki hai? Kiski aur kyu? ğŸ“¸",
    "Tujhe sabse zyada kis baat ka dar lagta hai? ğŸ˜±",
    "Kabhi kisi ki maa se jhooth bola hai kisi kaam ke liye? ğŸ¤­",
    "Tujhe kabhi kisi par aisa crush aaya jo tujhe nahi aana chahiye tha? ğŸ˜³",
    "Kabhi kisi dost ka secret jaan kar kisi aur ko bataya hai? ğŸ˜¶",
    "Agar tujhe kisi ek dost ko block karna pade, to kaun hoga? ğŸš«",
    "Tujhe sabse zyada kiska phone aane ka wait rehta hai? ğŸ“²",
    "Kabhi kisi ko bina matlab ke online ignore kiya hai? ğŸ§",
    "Tune kabhi kisi ka breakup ka reason suna hai? Kya reason tha? ğŸ’”",
    "Kabhi kisi se fake dosti ki hai bas kaam nikalne ke liye? ğŸ˜",
    "Agar tujhe ek din ke liye PM banne ka moka mile to kya karega? ğŸ›ï¸",
    "Tune kabhi kisi ko impress karne ke liye jhooth bola hai? ğŸ¤­",
    "Tujhe kis cheez me sabse zyada jealousy hoti hai? ğŸ˜¤",
    "Agar tu kisi bhi ek jagah time travel kar sakta to kaha jaayega? â³",
    "Tune kabhi kisi ka WhatsApp chat bina uske bataye dekha hai? ğŸ“²",
    "Kabhi kisi se bina matlab jhagad gaya hai? Kyu? ğŸ¤¨","Tune kabhi sir jhuka ke khud ka muh mai lene ka try kiya hai ?ğŸ¤£","Tuje kabhi chut ke darshan hue hai ? ğŸ¤£","sach batana tune kabhi bachpan mai mammi papa ko sex karte hue dekha hai ?ğŸ¤¡","Tuje kabhi mammi papa ke bedroom mai pillow ke niche condom mila hai ğŸ¤¡ğŸ’”"
] * 20  # 1000+ truths by repeating list

@client.on(events.NewMessage(pattern=r"^/truth(?:\s+@?\w+)?$"))
async def truth_command(event):
    sender = await event.get_sender()
    user_name = f"@{sender.username}" if sender.username else sender.first_name

    # Extract mentioned user if available
    reply_to = event.message.message.split(" ", 1)
    if len(reply_to) > 1:
        user_name = reply_to[1]  # Mentioned user

    truth_question = random.choice(truth_questions)
    await event.reply(f"ğŸ”¥ {user_name} {truth_question}")

import random
from telethon import events

# 1000+ random dare challenges list
dare_challenges = [
    "Abhi apne DP par ek embarrassing photo laga do aur 1 ghante tak mat hatao! ğŸ¤­",
    "Group ke kisi ek bande ko bina wajah 'I Love You' message bhejo! ğŸ˜œ",
    "Apni sabse sharamnaak selfie group me bhejo! ğŸ¤³ğŸ˜†",
    "Bina soche apna last WhatsApp message copy paste karo! ğŸ“©ğŸ˜‚",
    "Kisi stranger se 'Kya aap mujhe jaante hain?' puchho! ğŸ˜…",
    "Group me bina context ke 'Mujhe pyaar ho gaya hai' likho! â¤ï¸ğŸ˜‚",
    "Kisi ek member ko bina wajah 3 baar call karo! ğŸ“²ğŸ¤£",
    "Apni search history ka last 3 words likho! ğŸ”ğŸ˜‚",
    "Group ke kisi ek bande ko ek cheesy pickup line bhejo! ğŸ˜",
    "Aankh band karke ek random emoji bhejo jo bhi aaye wo tera mood batayega! ğŸ˜†",
    "Ek funny joke likho jo sabko hasaye! ğŸ¤£",
    "Apne ex ko 'Mujhe tumhari yaad aati hai' likh ke bhejo! ğŸ’”ğŸ˜",
    "5 minutes tak apni aankhein bandh rakh ke baitho! ğŸ˜µ",
    "Apne phone ka sabse embarrassing photo share karo! ğŸ“·ğŸ˜†",
    "Koi ek movie ka naam likho jisme tum hona chahte ho! ğŸ¬ğŸ˜",
    "Apna pichla chat screenshot bhejo (jisme mazedaar baat ho)! ğŸ“±ğŸ¤£",
    "Ek random funny video record karo aur group me bhejo! ğŸ“¹ğŸ˜‚",
    "5 baar zor zor se apna naam bolo aur record karke bhejo! ğŸ™ï¸ğŸ˜†",
    "Ek random funny dance ka video bana ke bhejo! ğŸ’ƒğŸ¤£",
    "Apni sabse pehli DP dikhao jo kabhi lagi thi! ğŸ–¼ï¸ğŸ˜‚",
    "Ek random kahani likho jo bina sense wali ho! ğŸ“–ğŸ˜œ",
    "Apna current wallpaper bhejo! ğŸ“²ğŸ˜",
    "Ek weird cheez batao jo sirf tujhe hi pasand hai! ğŸ˜œ",
    "Ek aise bande ko message bhejo jisse tune 1 saal se baat nahi ki! ğŸ•°ï¸ğŸ˜‚",
    "Koi bhi ek gaana 10 second tak loudly gao aur bhejo! ğŸµğŸ˜‚",
    "Kisi ek member ko bina wajah 10 baar tag karo! ğŸ˜†",
    "Group ke kisi ek bande se ek cheesy romantic dialogue likho! ğŸ˜",
    "Apna favorite gaana loudly chalao aur uspar dance karo! ğŸ’ƒğŸ¶",
    "Abhi kisi random bande ko Instagram pe follow karo! ğŸ“±ğŸ˜œ",
    "Apna sabse embarrassing nickname batao! ğŸ˜",
    "Bina context ke kisi random bande ko 'Kya haal hai jaanu?' likho! ğŸ˜",
    "Kisi random store pe jao aur bina wajah kuch puchh ke wapas aa jao! ğŸ˜†",
    "Group ke kisi ek bande ko bina wajah 'Pagal hai tu' bolo! ğŸ˜†",
    "Ek random movie ka naam likho aur uspar ek fake review do! ğŸ¬ğŸ˜œ",
    "Sabse ajeeb pose me selfie lo aur bhejo! ğŸ¤ªğŸ“¸",
    "Abhi apni profile bio me 'Main ek pagal hu!' likho aur 1 din tak mat hatao! ğŸ¤ª",
    "Kisi ek member ko bina wajah 'Kyu be' bolke mention karo! ğŸ˜œ",
    "Ek joke likho jo sirf group ke log hi samajh sake! ğŸ˜†",
    "Abhi kisi random bande ko video call karo aur bina kuch bole dekhte raho! ğŸ“¹ğŸ˜‚",
    "Ek random fake breaking news likho aur group me bhejo! ğŸ“°ğŸ˜†",
    "Apne dost ka ek embarrassing nickname batao! ğŸ˜‚",
    "Koi bhi ek funny shayari likho jo sabko hasaye! ğŸ­ğŸ˜†",
    "Kisi stranger ko Instagram pe jaake 'Hi Baby' likho! ğŸ˜ğŸ˜‚",
    "Kisi bhi ek member ko mimic karke dikhao (text me)! ğŸ˜œ",
    "Apna sabse bada secret batao jo kisi ko nahi pata! ğŸ¤«",
    "Kisi ek member se ek embarrassing question pucho! ğŸ˜œ",
    "Ek fake love letter likho aur kisi ek member ko send karo! ğŸ’ŒğŸ˜‚",
    "Ek weird superpower socho jo tumhare paas ho aur batao! ğŸ¦¸ğŸ˜†",
    "Group me bina context ke 'Mujhe chappal se maaro' likho! ğŸ˜‚",
    "Apna last YouTube search batao! ğŸ“ºğŸ˜‚",
    "Apni last online shopping ka screenshot bhejo! ğŸ›ï¸ğŸ˜‚",
    "Koi ek random kaam karo jo tumhe abhi tak kabhi nahi kiya! ğŸ¤¯",
    "Abhi apne phone ka battery percentage batao! ğŸ”‹ğŸ˜†",
    "Ek celebrity ka naam likho jiske saath date pe jaana chahoge! â¤ï¸",
    "Ek fake rishta fix karne wala message likho aur kisi ko send karo! ğŸ˜†",
    "Koi bhi ek horror kahani likho jo sabko dara de! ğŸ‘»ğŸ˜¨",
    "Abhi kisi stranger se 'Mujhe tumse milna hai' bolo! ğŸ“ğŸ˜",
    "Apna sabse embarrassing school moment share karo! ğŸ’ğŸ˜‚",
    "Koi bhi ek random online test do aur uska result share karo! ğŸ“ğŸ˜†",
    "Ek food combination batao jo sirf tumhe pasand ho! ğŸ•ğŸ«ğŸ˜‚",
    "Abhi apni screen brightness 100% karo aur ek selfie bhejo! ğŸ“±ğŸ˜†",
    "Ek funny prank ka idea batao jo tum kisi pe kar chuke ho! ğŸ˜œ",
    "Abhi ek friend ko bina wajah 10 baar call karo aur dekho kya hota hai! ğŸ“ğŸ¤£","Apni Ex ke nudes bhej de ya to group mai ya owner ke dm mai","@x_k4i Ko papa bol mention kar ke nahi to th chakka","Kabhi mutthi maar ke apna sperm muh mai lene ka try kiya hai?"
] * 20  # 1000+ dares by repeating list

@client.on(events.NewMessage(pattern=r"^/dare(?:\s+@?\w+)?$"))
async def dare_command(event):
    sender = await event.get_sender()
    user_name = f"@{sender.username}" if sender.username else sender.first_name

    # Extract mentioned user if available
    reply_to = event.message.message.split(" ", 1)
    if len(reply_to) > 1:
        user_name = reply_to[1]  # Mentioned user

    dare_task = random.choice(dare_challenges)
    await event.reply(f"ğŸ”¥ {user_name}{dare_task}")

import logging
from telethon import events, Button

# Logging setup
logging.basicConfig(format="%(asctime)s - %(levelname)s - %(message)s", level=logging.INFO)

# Game state
games = {}

async def start_xo(event):
    """Start a new Tic-Tac-Toe game. ğŸ®"""
    chat_id = event.chat_id
    user = event.sender_id

    if chat_id in games:
        await event.respond("âŒ **Ek game already chal raha hai!** Pehle use finish karo. ğŸ˜…")
        return

    # Initialize board
    board = [[" " for _ in range(3)] for _ in range(3)]
    games[chat_id] = {"board": board, "turn": "X", "players": [user, None], "message_id": None}

    sent_message = await event.respond("ğŸ® **Tic-Tac-Toe Game Start!**\n"
                                       "ğŸ‘‰ Pehle player ne '<code>âŒ</code>' choose kiya hai.\n"
                                       "ğŸ‘‰ Dusra player reply kare `/join` likh ke! ğŸš€", parse_mode="html")
    games[chat_id]["message_id"] = sent_message.id

async def join_xo(event):
    """Allow second player to join the game. ğŸ‘¥"""
    chat_id = event.chat_id
    user = event.sender_id

    if chat_id not in games:
        await event.respond("âš ï¸ **Koi active game nahi hai.** Start karne ke liye `/xo` likho! ğŸ®")
        return

    if games[chat_id]["players"][1] is not None:
        await event.respond("ğŸ™… **Already do players hai!** Game start ho chuka hai. ğŸš€")
        return

    games[chat_id]["players"][1] = user
    await send_board(chat_id)

async def send_board(chat_id):
    """Send the current board state with inline buttons. ğŸ“œ"""
    game = games.get(chat_id)
    if not game:
        return

    board = game["board"]
    turn = game["turn"]
    player1 = await client.get_entity(game["players"][0])
    player2 = await client.get_entity(game["players"][1])

    # Generate inline keyboard
    keyboard = []
    for i in range(3):
        row = []
        for j in range(3):
            text = board[i][j] if board[i][j] != " " else "â¬œ"
            row.append(Button.inline(text, data=f"{i},{j}"))
        keyboard.append(row)

    msg = (f"ğŸ² **Tic-Tac-Toe Game!**\n"
           f"ğŸ‘¤ {player1.first_name} = <code>âŒ</code>\n"
           f"ğŸ‘¤ {player2.first_name} = <code>â­•</code>\n"
           f"ğŸ”„ <b>{turn}</b> ki baari hai! ğŸš€")

    try:
        await client.edit_message(chat_id, game["message_id"], msg, buttons=keyboard, parse_mode="html")
    except:
        pass  # Agar message edit nahi hota, ignore kar do

@client.on(events.CallbackQuery)
async def button_click(event):
    """Handle button clicks for the game. ğŸ–±ï¸"""
    chat_id = event.chat_id
    user_id = event.sender_id

    if chat_id not in games:
        await event.answer("âš ï¸ **Koi active game nahi hai.**")
        return

    game = games[chat_id]

    if user_id not in game["players"]:
        await event.answer("ğŸ™… **Aap iss game ke player nahi ho!**")
        return

    if user_id != game["players"][0] and game["turn"] == "X":
        await event.answer("âŒ **X ki baari hai!**")
        return
    elif user_id != game["players"][1] and game["turn"] == "O":
        await event.answer("â­• **O ki baari hai!**")
        return

    i, j = map(int, event.data.decode().split(","))
    if game["board"][i][j] != " ":
        await event.answer("ğŸš« **Yeh jagah already occupied hai!**")
        return

    game["board"][i][j] = game["turn"]
    game["turn"] = "O" if game["turn"] == "X" else "X"

    await check_winner(chat_id)

async def check_winner(chat_id):
    """Winner check karega. ğŸ…"""
    game = games.get(chat_id)
    if not game:
        return

    board = game["board"]
    players = game["players"]

    for i in range(3):
        if board[i][0] == board[i][1] == board[i][2] != " ":
            await announce_winner(chat_id, board[i][0], players)
            return
        if board[0][i] == board[1][i] == board[2][i] != " ":
            await announce_winner(chat_id, board[0][i], players)
            return

    if board[0][0] == board[1][1] == board[2][2] != " ":
        await announce_winner(chat_id, board[0][0], players)
        return
    if board[0][2] == board[1][1] == board[2][0] != " ":
        await announce_winner(chat_id, board[0][2], players)
        return

    if all(board[i][j] != " " for i in range(3) for j in range(3)):
        await client.edit_message(chat_id, game["message_id"], "ğŸ˜… Game Draw Ho Gaya! ğŸ¤")
        del games[chat_id]
        return

    await send_board(chat_id)

async def announce_winner(chat_id, winner, players):
    """Winner announce karega. ğŸ‰"""
    winner_id = players[0] if winner == "X" else players[1]
    winner_entity = await client.get_entity(winner_id)
    
    await client.edit_message(chat_id, games[chat_id]["message_id"], f"ğŸŠ **[{winner_entity.first_name}](tg://user?id={winner_id}) ne game Jeet liya!** ğŸ†ğŸ”¥", parse_mode="md")
    del games[chat_id]

@client.on(events.NewMessage(pattern="/xo"))
async def xo_command(event):
    """Start Tic-Tac-Toe game ya user ko challenge kare. ğŸ®"""
    args = event.raw_text.split()
    
    if len(args) == 1:
        await start_xo(event)
    elif len(args) == 2:
        user_mention = args[1]
        opponent = await client.get_entity(user_mention)
        chat_id = event.chat_id

        if chat_id in games:
            await event.r
